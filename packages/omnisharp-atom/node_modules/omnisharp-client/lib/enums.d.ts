import * as OmniSharp from "./omnisharp-server";
import { IDisposable } from "./disposables";
import { Observable } from "rxjs";
import { RequestContext, ResponseContext, CommandContext } from "./contexts";
export declare enum Driver {
    Http = 0,
    Stdio = 1,
}
export declare enum DriverState {
    Disconnected = 0,
    Downloading = 1,
    Downloaded = 2,
    Connecting = 3,
    Connected = 4,
    Error = 5,
}
export declare enum Runtime {
    ClrOrMono = 0,
    CoreClr = 1,
}
export interface IStaticDriver {
    new (options: IDriverOptions): IDriver;
}
export interface ILogger {
    log(...values: any[]): void;
    error(...values: any[]): void;
}
export interface IDriverOptions {
    projectPath: string;
    remote?: boolean;
    debug?: boolean;
    serverPath?: string;
    findProject?: boolean;
    logger?: ILogger;
    timeout?: number;
    runtime?: Runtime;
    additionalArguments?: string[];
    plugins?: IOmnisharpPlugin[];
    version?: string;
}
export interface IDriver extends IDisposable {
    id: string;
    connect(): void;
    currentState: DriverState;
    events: Observable<OmniSharp.Stdio.Protocol.EventPacket>;
    commands: Observable<OmniSharp.Stdio.Protocol.ResponsePacket>;
    state: Observable<DriverState>;
    disconnect(): void;
    serverPath: string;
    projectPath: string;
    runtime: Runtime;
    request<TRequest, TResponse>(command: string, request?: TRequest): Observable<TResponse>;
}
export interface IPluginDriver extends IDriver {
    updatePlugins(plugins: IOmnisharpPlugin): void;
}
export declare function isPluginDriver(driver: any): driver is IPluginDriver;
export interface OmnisharpClientOptions extends IDriverOptions {
    driver?: Driver;
    oneBasedIndices?: boolean;
    statusSampleTime?: number;
    responseSampleTime?: number;
    concurrency?: number;
    concurrencyTimeout?: number;
    omnisharp?: {
        dnx?: {
            alias?: string;
            projects?: string;
            enablePackageRestore?: string;
            packageRestoreTimeout?: number;
        };
        formattingOptions?: {
            newLine?: string;
            useTabs?: boolean;
            tabSize?: number;
        };
    };
}
export interface IOmnisharpPlugin {
    name?: string;
    version?: string;
    location?: string;
}
export interface OmnisharpClientStatus {
    state: DriverState;
    outgoingRequests: number;
    hasOutgoingRequests: boolean;
}
export declare module Omnisharp {
    interface Events {
        events: Observable<OmniSharp.Stdio.Protocol.EventPacket>;
        commands: Observable<OmniSharp.Stdio.Protocol.ResponsePacket>;
        state: Observable<DriverState>;
        status: Observable<OmnisharpClientStatus>;
        requests: Observable<RequestContext<any>>;
        responses: Observable<ResponseContext<any, any>>;
        errors: Observable<CommandContext<any>>;
    }
}
