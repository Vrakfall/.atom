"use strict";
var rxjs_1 = require('rxjs');
var ts_disposables_1 = require('ts-disposables');
var _ = require('lodash');
var decorators_1 = require('../helpers/decorators');
var ReactiveObservationClient = (function () {
    function ReactiveObservationClient(clients) {
        var _this = this;
        if (clients === void 0) { clients = []; }
        this.clients = clients;
        this._disposable = new ts_disposables_1.CompositeDisposable();
        this._clientDisposable = new ts_disposables_1.CompositeDisposable();
        this._clientsSubject = new rxjs_1.ReplaySubject(1);
        this.makeObservable = function (selector) {
            return _this._clientsSubject.switchMap(function (clients) { return rxjs_1.Observable.merge.apply(rxjs_1.Observable, clients.map(selector)); }).share();
        };
        this.next = function () { return _this._clientsSubject.next(_this.clients.slice()); };
        this.next();
        this._disposable.add(this._clientDisposable);
    }
    ReactiveObservationClient.prototype.dispose = function () {
        if (this._disposable.isDisposed)
            return;
        this._disposable.dispose();
    };
    ReactiveObservationClient.prototype.listenTo = function (selector) {
        return this.makeObservable(selector);
    };
    ReactiveObservationClient.prototype.listen = function (selector) {
        var key = decorators_1.getInternalKey(selector);
        var value = this[key];
        if (!value) {
            return decorators_1.setMergeOrAggregate(this, selector);
        }
        return value;
    };
    ReactiveObservationClient.prototype.add = function (client) {
        var _this = this;
        this.clients.push(client);
        this.next();
        var d = ts_disposables_1.Disposable.create(function () {
            _.pull(_this.clients, client);
            _this.next();
        });
        this._clientDisposable.add(d);
        return d;
    };
    return ReactiveObservationClient;
}());
exports.ReactiveObservationClient = ReactiveObservationClient;
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'events', 'events');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'commands', 'commands');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'state', 'state');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'status', 'status');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'requests', 'requests');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'responses', 'responses');
decorators_1.makeObservable(ReactiveObservationClient.prototype, 'errors', 'errors');
// <#GENERATED />
decorators_1.makeObservable(ReactiveObservationClient.prototype, "getteststartinfo", "/v2/getteststartinfo");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "runtest", "/v2/runtest");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "autocomplete", "/autocomplete");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "changebuffer", "/changebuffer");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "codecheck", "/codecheck");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "codeformat", "/codeformat");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "diagnostics", "/diagnostics");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "close", "/close");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "open", "/open");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "filesChanged", "/filesChanged");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "findimplementations", "/findimplementations");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "findsymbols", "/findsymbols");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "findusages", "/findusages");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "fixusings", "/fixusings");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "formatAfterKeystroke", "/formatAfterKeystroke");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "formatRange", "/formatRange");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "getcodeactions", "/v2/getcodeactions");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "gotodefinition", "/gotodefinition");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "gotofile", "/gotofile");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "gotoregion", "/gotoregion");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "highlight", "/highlight");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "currentfilemembersasflat", "/currentfilemembersasflat");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "currentfilemembersastree", "/currentfilemembersastree");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "metadata", "/metadata");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "navigatedown", "/navigatedown");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "navigateup", "/navigateup");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "packagesearch", "/packagesearch");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "packagesource", "/packagesource");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "packageversion", "/packageversion");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "rename", "/rename");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "runcodeaction", "/v2/runcodeaction");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "signatureHelp", "/signatureHelp");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "gettestcontext", "/gettestcontext");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "typelookup", "/typelookup");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "updatebuffer", "/updatebuffer");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "project", "/project");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "projects", "/projects");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "checkalivestatus", "/checkalivestatus");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "checkreadystatus", "/checkreadystatus");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "stopserver", "/stopserver");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "projectAdded", "projectAdded");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "projectChanged", "projectChanged");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "projectRemoved", "projectRemoved");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "error", "error");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "diagnostic", "diagnostic");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "msBuildProjectDiagnostics", "msBuildProjectDiagnostics");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "packageRestoreStarted", "packageRestoreStarted");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "packageRestoreFinished", "packageRestoreFinished");
decorators_1.makeObservable(ReactiveObservationClient.prototype, "unresolvedDependencies", "unresolvedDependencies");

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9yZWFjdGl2ZS9yZWFjdGl2ZS1vYnNlcnZhdGlvbi1jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLHFCQUEwQyxNQUFNLENBQUMsQ0FBQTtBQUNqRCwrQkFBNkQsZ0JBQWdCLENBQUMsQ0FBQTtBQUM5RSxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1QiwyQkFBb0UsdUJBQXVCLENBQUMsQ0FBQTtBQUk1RjtJQU1JLG1DQUFvQixPQUF1QjtRQU4vQyxpQkE2Q0M7UUF2Q2UsdUJBQStCLEdBQS9CLFlBQStCO1FBQXZCLFlBQU8sR0FBUCxPQUFPLENBQWdCO1FBTGpDLGdCQUFXLEdBQUcsSUFBSSxvQ0FBbUIsRUFBRSxDQUFDO1FBQzFDLHNCQUFpQixHQUFHLElBQUksb0NBQW1CLEVBQUUsQ0FBQztRQUM1QyxvQkFBZSxHQUFHLElBQUksb0JBQWEsQ0FBWSxDQUFDLENBQUMsQ0FBQztRQWFsRCxtQkFBYyxHQUFHLFVBQUksUUFBNEM7WUFDdkUsTUFBTSxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLFVBQUEsT0FBTyxJQUFJLE9BQUEsaUJBQVUsQ0FBQyxLQUFLLE9BQWhCLGlCQUFVLEVBQWEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUE3QyxDQUE2QyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDNUcsQ0FBQyxDQUFDO1FBZU0sU0FBSSxHQUFHLGNBQU0sT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQS9DLENBQStDLENBQUM7UUExQmpFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNaLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFTSwyQ0FBTyxHQUFkO1FBQ0ksRUFBRSxDQUFDLENBQUMsSUFB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QUMsU0FBUyxFQUFFLHdCQUF3QixFQUFFLHdCQUF3QixDQUFDLENBQUMiLCJmaWxlIjoibGliL3JlYWN0aXZlL3JlYWN0aXZlLW9ic2VydmF0aW9uLWNsaWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIE9tbmlTaGFycCBmcm9tICcuLi9vbW5pc2hhcnAtc2VydmVyJztcbmltcG9ydCB7IFJlcGxheVN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbXBvc2l0ZURpc3Bvc2FibGUsIERpc3Bvc2FibGUsIElEaXNwb3NhYmxlIH0gZnJvbSAndHMtZGlzcG9zYWJsZXMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgUmVhY3RpdmVDbGllbnQgfSBmcm9tICcuL3JlYWN0aXZlLWNsaWVudCc7XG5pbXBvcnQgeyBzZXRNZXJnZU9yQWdncmVnYXRlLCBnZXRJbnRlcm5hbEtleSwgbWFrZU9ic2VydmFibGUgfSBmcm9tICcuLi9oZWxwZXJzL2RlY29yYXRvcnMnO1xuaW1wb3J0IHsgRHJpdmVyU3RhdGUsIE9tbmlzaGFycENsaWVudFN0YXR1cyB9IGZyb20gJy4uL2VudW1zJztcbmltcG9ydCB7IFJlcXVlc3RDb250ZXh0LCBSZXNwb25zZUNvbnRleHQsIENvbW1hbmRDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dHMnO1xuXG5leHBvcnQgY2xhc3MgUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudDxUQ2xpZW50IGV4dGVuZHMgUmVhY3RpdmVDbGllbnQ+IGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICAgIHByb3RlY3RlZCBfZGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgcHJpdmF0ZSBfY2xpZW50RGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgcHJvdGVjdGVkIF9jbGllbnRzU3ViamVjdCA9IG5ldyBSZXBsYXlTdWJqZWN0PFRDbGllbnRbXT4oMSk7XG4gICAgW2luZGV4OiBzdHJpbmddOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNsaWVudHM6IFRDbGllbnRbXSA9IFtdKSB7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlLmFkZCh0aGlzLl9jbGllbnREaXNwb3NhYmxlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2FibGUuaXNEaXNwb3NlZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgbWFrZU9ic2VydmFibGUgPSA8VD4oc2VsZWN0b3I6IChjbGllbnQ6IFRDbGllbnQpID0+IE9ic2VydmFibGU8VD4pID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsaWVudHNTdWJqZWN0LnN3aXRjaE1hcChjbGllbnRzID0+IE9ic2VydmFibGUubWVyZ2U8VD4oLi4uY2xpZW50cy5tYXAoc2VsZWN0b3IpKSkuc2hhcmUoKTtcbiAgICB9O1xuXG4gICAgcHVibGljIGxpc3RlblRvPFQ+KHNlbGVjdG9yOiAoY2xpZW50OiBUQ2xpZW50KSA9PiBPYnNlcnZhYmxlPFQ+KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ha2VPYnNlcnZhYmxlKHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbGlzdGVuPFQ+KHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0SW50ZXJuYWxLZXkoc2VsZWN0b3IpO1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzW2tleV07XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRNZXJnZU9yQWdncmVnYXRlKHRoaXMsIHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBuZXh0ID0gKCkgPT4gdGhpcy5fY2xpZW50c1N1YmplY3QubmV4dCh0aGlzLmNsaWVudHMuc2xpY2UoKSk7XG5cbiAgICBwdWJsaWMgYWRkKGNsaWVudDogVENsaWVudCkge1xuICAgICAgICB0aGlzLmNsaWVudHMucHVzaChjbGllbnQpO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgY29uc3QgZCA9IERpc3Bvc2FibGUuY3JlYXRlKCgpID0+IHtcbiAgICAgICAgICAgIF8ucHVsbCh0aGlzLmNsaWVudHMsIGNsaWVudCk7XG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NsaWVudERpc3Bvc2FibGUuYWRkKGQpO1xuICAgICAgICByZXR1cm4gZDtcbiAgICB9XG59XG5cbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCAnZXZlbnRzJywgJ2V2ZW50cycpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsICdjb21tYW5kcycsICdjb21tYW5kcycpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsICdzdGF0ZScsICdzdGF0ZScpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsICdzdGF0dXMnLCAnc3RhdHVzJyk7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgJ3JlcXVlc3RzJywgJ3JlcXVlc3RzJyk7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgJ3Jlc3BvbnNlcycsICdyZXNwb25zZXMnKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCAnZXJyb3JzJywgJ2Vycm9ycycpO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQ8VENsaWVudCBleHRlbmRzIFJlYWN0aXZlQ2xpZW50PiBleHRlbmRzIE9tbmlTaGFycC5FdmVudHMsIE9tbmlTaGFycC5FdmVudHMuVjIge1xuICAgIC8qcmVhZG9ubHkqLyBldmVudHM6IE9ic2VydmFibGU8T21uaVNoYXJwLlN0ZGlvLlByb3RvY29sLkV2ZW50UGFja2V0PjtcbiAgICAvKnJlYWRvbmx5Ki8gY29tbWFuZHM6IE9ic2VydmFibGU8T21uaVNoYXJwLlN0ZGlvLlByb3RvY29sLlJlc3BvbnNlUGFja2V0PjtcbiAgICAvKnJlYWRvbmx5Ki8gc3RhdGU6IE9ic2VydmFibGU8RHJpdmVyU3RhdGU+O1xuICAgIC8qcmVhZG9ubHkqLyBzdGF0dXM6IE9ic2VydmFibGU8T21uaXNoYXJwQ2xpZW50U3RhdHVzPjtcbiAgICAvKnJlYWRvbmx5Ki8gcmVxdWVzdHM6IE9ic2VydmFibGU8UmVxdWVzdENvbnRleHQ8YW55Pj47XG4gICAgLypyZWFkb25seSovIHJlc3BvbnNlczogT2JzZXJ2YWJsZTxSZXNwb25zZUNvbnRleHQ8YW55LCBhbnk+PjtcbiAgICAvKnJlYWRvbmx5Ki8gZXJyb3JzOiBPYnNlcnZhYmxlPENvbW1hbmRDb250ZXh0PGFueT4+O1xufVxuXG4vLyA8I0dFTkVSQVRFRCAvPlxubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiZ2V0dGVzdHN0YXJ0aW5mb1wiLCBcIi92Mi9nZXR0ZXN0c3RhcnRpbmZvXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicnVudGVzdFwiLCBcIi92Mi9ydW50ZXN0XCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiYXV0b2NvbXBsZXRlXCIsIFwiL2F1dG9jb21wbGV0ZVwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImNoYW5nZWJ1ZmZlclwiLCBcIi9jaGFuZ2VidWZmZXJcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJjb2RlY2hlY2tcIiwgXCIvY29kZWNoZWNrXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiY29kZWZvcm1hdFwiLCBcIi9jb2RlZm9ybWF0XCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiZGlhZ25vc3RpY3NcIiwgXCIvZGlhZ25vc3RpY3NcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJjbG9zZVwiLCBcIi9jbG9zZVwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcIm9wZW5cIiwgXCIvb3BlblwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImZpbGVzQ2hhbmdlZFwiLCBcIi9maWxlc0NoYW5nZWRcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJmaW5kaW1wbGVtZW50YXRpb25zXCIsIFwiL2ZpbmRpbXBsZW1lbnRhdGlvbnNcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJmaW5kc3ltYm9sc1wiLCBcIi9maW5kc3ltYm9sc1wiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImZpbmR1c2FnZXNcIiwgXCIvZmluZHVzYWdlc1wiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImZpeHVzaW5nc1wiLCBcIi9maXh1c2luZ3NcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJmb3JtYXRBZnRlcktleXN0cm9rZVwiLCBcIi9mb3JtYXRBZnRlcktleXN0cm9rZVwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImZvcm1hdFJhbmdlXCIsIFwiL2Zvcm1hdFJhbmdlXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiZ2V0Y29kZWFjdGlvbnNcIiwgXCIvdjIvZ2V0Y29kZWFjdGlvbnNcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJnb3RvZGVmaW5pdGlvblwiLCBcIi9nb3RvZGVmaW5pdGlvblwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImdvdG9maWxlXCIsIFwiL2dvdG9maWxlXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiZ290b3JlZ2lvblwiLCBcIi9nb3RvcmVnaW9uXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiaGlnaGxpZ2h0XCIsIFwiL2hpZ2hsaWdodFwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImN1cnJlbnRmaWxlbWVtYmVyc2FzZmxhdFwiLCBcIi9jdXJyZW50ZmlsZW1lbWJlcnNhc2ZsYXRcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJjdXJyZW50ZmlsZW1lbWJlcnNhc3RyZWVcIiwgXCIvY3VycmVudGZpbGVtZW1iZXJzYXN0cmVlXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwibWV0YWRhdGFcIiwgXCIvbWV0YWRhdGFcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJuYXZpZ2F0ZWRvd25cIiwgXCIvbmF2aWdhdGVkb3duXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwibmF2aWdhdGV1cFwiLCBcIi9uYXZpZ2F0ZXVwXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicGFja2FnZXNlYXJjaFwiLCBcIi9wYWNrYWdlc2VhcmNoXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicGFja2FnZXNvdXJjZVwiLCBcIi9wYWNrYWdlc291cmNlXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicGFja2FnZXZlcnNpb25cIiwgXCIvcGFja2FnZXZlcnNpb25cIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJyZW5hbWVcIiwgXCIvcmVuYW1lXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicnVuY29kZWFjdGlvblwiLCBcIi92Mi9ydW5jb2RlYWN0aW9uXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwic2lnbmF0dXJlSGVscFwiLCBcIi9zaWduYXR1cmVIZWxwXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwiZ2V0dGVzdGNvbnRleHRcIiwgXCIvZ2V0dGVzdGNvbnRleHRcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJ0eXBlbG9va3VwXCIsIFwiL3R5cGVsb29rdXBcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJ1cGRhdGVidWZmZXJcIiwgXCIvdXBkYXRlYnVmZmVyXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicHJvamVjdFwiLCBcIi9wcm9qZWN0XCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicHJvamVjdHNcIiwgXCIvcHJvamVjdHNcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJjaGVja2FsaXZlc3RhdHVzXCIsIFwiL2NoZWNrYWxpdmVzdGF0dXNcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJjaGVja3JlYWR5c3RhdHVzXCIsIFwiL2NoZWNrcmVhZHlzdGF0dXNcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJzdG9wc2VydmVyXCIsIFwiL3N0b3BzZXJ2ZXJcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJwcm9qZWN0QWRkZWRcIiwgXCJwcm9qZWN0QWRkZWRcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJwcm9qZWN0Q2hhbmdlZFwiLCBcInByb2plY3RDaGFuZ2VkXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicHJvamVjdFJlbW92ZWRcIiwgXCJwcm9qZWN0UmVtb3ZlZFwiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcImVycm9yXCIsIFwiZXJyb3JcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJkaWFnbm9zdGljXCIsIFwiZGlhZ25vc3RpY1wiKTtcbm1ha2VPYnNlcnZhYmxlKFJlYWN0aXZlT2JzZXJ2YXRpb25DbGllbnQucHJvdG90eXBlLCBcIm1zQnVpbGRQcm9qZWN0RGlhZ25vc3RpY3NcIiwgXCJtc0J1aWxkUHJvamVjdERpYWdub3N0aWNzXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicGFja2FnZVJlc3RvcmVTdGFydGVkXCIsIFwicGFja2FnZVJlc3RvcmVTdGFydGVkXCIpO1xubWFrZU9ic2VydmFibGUoUmVhY3RpdmVPYnNlcnZhdGlvbkNsaWVudC5wcm90b3R5cGUsIFwicGFja2FnZVJlc3RvcmVGaW5pc2hlZFwiLCBcInBhY2thZ2VSZXN0b3JlRmluaXNoZWRcIik7XG5tYWtlT2JzZXJ2YWJsZShSZWFjdGl2ZU9ic2VydmF0aW9uQ2xpZW50LnByb3RvdHlwZSwgXCJ1bnJlc29sdmVkRGVwZW5kZW5jaWVzXCIsIFwidW5yZXNvbHZlZERlcGVuZGVuY2llc1wiKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
