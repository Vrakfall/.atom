"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var empty = void 0;

var Disposable = exports.Disposable = function () {
    function Disposable(value) {
        _classCallCheck(this, Disposable);

        this._isDisposed = false;
        if (!value) return empty;
        if (typeof value === "function") {
            this._action = value;
        } else if (value.unsubscribe) {
            this._action = function () {
                return value.unsubscribe();
            };
        } else if (value.dispose) {
            this._action = function () {
                return value.dispose();
            };
        }
    }

    _createClass(Disposable, [{
        key: "dispose",
        value: function dispose() {
            if (!this.isDisposed) {
                this._isDisposed = true;
                this._action();
            }
        }
    }, {
        key: "isDisposed",
        get: function get() {
            return this._isDisposed;
        }
    }], [{
        key: "of",
        value: function of(value) {
            if (!value) return empty;
            if (value.dispose) {
                return value;
            }
            return new Disposable(value);
        }
    }, {
        key: "create",
        value: function create(action) {
            return new Disposable(action);
        }
    }, {
        key: "empty",
        get: function get() {
            return empty;
        }
    }]);

    return Disposable;
}();

empty = new Disposable(function noop() {});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kaXNwb3NhYmxlcy9EaXNwb3NhYmxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFTQSxJQUFJLGNBQUo7O0lBRUE7QUFvQkksYUFwQkosVUFvQkksQ0FBWSxLQUFaLEVBQXNCOzhCQXBCMUIsWUFvQjBCOztBQUhkLGFBQUEsV0FBQSxHQUFjLEtBQWQsQ0FHYztBQUNsQixZQUFJLENBQUMsS0FBRCxFQUFRLE9BQU8sS0FBUCxDQUFaO0FBRUEsWUFBSSxPQUFPLEtBQVAsS0FBaUIsVUFBakIsRUFBNkI7QUFDN0IsaUJBQUssT0FBTCxHQUFlLEtBQWYsQ0FENkI7U0FBakMsTUFFTyxJQUFJLE1BQU0sV0FBTixFQUFtQjtBQUMxQixpQkFBSyxPQUFMLEdBQWU7dUJBQXNCLE1BQU8sV0FBUDthQUF0QixDQURXO1NBQXZCLE1BRUEsSUFBSSxNQUFNLE9BQU4sRUFBZTtBQUN0QixpQkFBSyxPQUFMLEdBQWU7dUJBQW9CLE1BQU8sT0FBUDthQUFwQixDQURPO1NBQW5CO0tBUFg7O2lCQXBCSjs7a0NBa0NrQjtBQUNWLGdCQUFJLENBQUMsS0FBSyxVQUFMLEVBQWlCO0FBQ2xCLHFCQUFLLFdBQUwsR0FBbUIsSUFBbkIsQ0FEa0I7QUFFbEIscUJBQUssT0FBTCxHQUZrQjthQUF0Qjs7Ozs0QkFIaUI7QUFBSyxtQkFBTyxLQUFLLFdBQUwsQ0FBWjs7OzsyQkE3QkosT0FBVTtBQUN2QixnQkFBSSxDQUFDLEtBQUQsRUFBUSxPQUFPLEtBQVAsQ0FBWjtBQUVBLGdCQUFJLE1BQU0sT0FBTixFQUFlO0FBQ2YsdUJBQW9CLEtBQXBCLENBRGU7YUFBbkI7QUFHQSxtQkFBTyxJQUFJLFVBQUosQ0FBZSxLQUFmLENBQVAsQ0FOdUI7Ozs7K0JBU04sUUFBa0I7QUFDbkMsbUJBQU8sSUFBSSxVQUFKLENBQWUsTUFBZixDQUFQLENBRG1DOzs7OzRCQVhoQjtBQUFLLG1CQUFPLEtBQVAsQ0FBTDs7OztXQUQzQjs7O0FBMENBLFFBQVEsSUFBSSxVQUFKLENBQWUsU0FBQSxJQUFBLEdBQUEsRUFBQSxDQUF2QiIsImZpbGUiOiJsaWIvZGlzcG9zYWJsZXMvRGlzcG9zYWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgSURpc3Bvc2FibGUge1xuICAgIGRpc3Bvc2UoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3Vic2NyaXB0aW9uIHtcbiAgICB1bnN1YnNjcmliZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBJRGlzcG9zYWJsZU9yU3Vic2NyaXB0aW9uID0gSURpc3Bvc2FibGUgfCBJU3Vic2NyaXB0aW9uIHwgKCgpID0+IHZvaWQpO1xubGV0IGVtcHR5OiBEaXNwb3NhYmxlO1xuXG5leHBvcnQgY2xhc3MgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgICBwdWJsaWMgc3RhdGljIGdldCBlbXB0eSgpIHsgcmV0dXJuIGVtcHR5OyB9XG5cbiAgICBwdWJsaWMgc3RhdGljIG9mKHZhbHVlOiBhbnkpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGVtcHR5O1xuXG4gICAgICAgIGlmICh2YWx1ZS5kaXNwb3NlKSB7XG4gICAgICAgICAgICByZXR1cm4gPElEaXNwb3NhYmxlPnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUoYWN0aW9uOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGlzcG9zYWJsZShhY3Rpb24pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2FjdGlvbjogKCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIF9pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZTogSURpc3Bvc2FibGVPclN1YnNjcmlwdGlvbik7XG4gICAgY29uc3RydWN0b3IodmFsdWU6IGFueSkge1xuICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gZW1wdHk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fYWN0aW9uID0gKCkgPT4gKDxJU3Vic2NyaXB0aW9uPnZhbHVlKS51bnN1YnNjcmliZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmRpc3Bvc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbiA9ICgpID0+ICg8SURpc3Bvc2FibGU+dmFsdWUpLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgaXNEaXNwb3NlZCgpIHsgcmV0dXJuIHRoaXMuX2lzRGlzcG9zZWQ7IH1cblxuICAgIHB1YmxpYyBkaXNwb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZW1wdHkgPSBuZXcgRGlzcG9zYWJsZShmdW5jdGlvbiBub29wKCkgeyAvKiAqLyB9KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
