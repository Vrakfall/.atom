"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SerialDisposable = exports.SerialDisposable = function () {
    function SerialDisposable() {
        _classCallCheck(this, SerialDisposable);

        this._isDisposed = false;
    }

    _createClass(SerialDisposable, [{
        key: "dispose",
        value: function dispose() {
            if (!this.isDisposed) {
                this._isDisposed = true;
                var old = this._currentDisposable;
                this._currentDisposable = null;
                if (old) old.dispose();
            }
        }
    }, {
        key: "isDisposed",
        get: function get() {
            return this._isDisposed;
        }
    }, {
        key: "disposable",
        get: function get() {
            return this._currentDisposable;
        },
        set: function set(value) {
            var shouldDispose = this.isDisposed;
            if (!shouldDispose) {
                this._currentDisposable = value;
            }
            if (!this.isDisposed) this._currentDisposable = value;
            if (this.isDisposed && value) value.dispose();
        }
    }]);

    return SerialDisposable;
}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kaXNwb3NhYmxlcy9TZXJpYWxEaXNwb3NhYmxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFFQTtBQUFBLGFBQUEsZ0JBQUEsR0FBQTs4QkFBQSxrQkFBQTs7QUFFWSxhQUFBLFdBQUEsR0FBYyxLQUFkLENBRlo7S0FBQTs7aUJBQUE7O2tDQWdCa0I7QUFDVixnQkFBSSxDQUFDLEtBQUssVUFBTCxFQUFpQjtBQUNsQixxQkFBSyxXQUFMLEdBQW1CLElBQW5CLENBRGtCO0FBRWxCLG9CQUFNLE1BQU0sS0FBSyxrQkFBTCxDQUZNO0FBR2xCLHFCQUFLLGtCQUFMLEdBQTBCLElBQTFCLENBSGtCO0FBSWxCLG9CQUFJLEdBQUosRUFBUyxJQUFJLE9BQUosR0FBVDthQUpKOzs7OzRCQWJpQjtBQUFLLG1CQUFPLEtBQUssV0FBTCxDQUFaOzs7OzRCQUVBO0FBQUssbUJBQU8sS0FBSyxrQkFBTCxDQUFaOzswQkFDQyxPQUFLO0FBQ3ZCLGdCQUFNLGdCQUFnQixLQUFLLFVBQUwsQ0FEQztBQUV2QixnQkFBSSxDQUFDLGFBQUQsRUFBZ0I7QUFDaEIscUJBQUssa0JBQUwsR0FBMEIsS0FBMUIsQ0FEZ0I7YUFBcEI7QUFHQSxnQkFBSSxDQUFDLEtBQUssVUFBTCxFQUFpQixLQUFLLGtCQUFMLEdBQTBCLEtBQTFCLENBQXRCO0FBQ0EsZ0JBQUksS0FBSyxVQUFMLElBQW1CLEtBQW5CLEVBQTBCLE1BQU0sT0FBTixHQUE5Qjs7OztXQWJSIiwiZmlsZSI6ImxpYi9kaXNwb3NhYmxlcy9TZXJpYWxEaXNwb3NhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJRGlzcG9zYWJsZX0gZnJvbSBcIi4vRGlzcG9zYWJsZVwiO1xuXG5leHBvcnQgY2xhc3MgU2VyaWFsRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgICBwcml2YXRlIF9jdXJyZW50RGlzcG9zYWJsZTogSURpc3Bvc2FibGU7XG4gICAgcHJpdmF0ZSBfaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG4gICAgcHVibGljIGdldCBpc0Rpc3Bvc2VkKCkgeyByZXR1cm4gdGhpcy5faXNEaXNwb3NlZDsgfVxuXG4gICAgcHVibGljIGdldCBkaXNwb3NhYmxlKCkgeyByZXR1cm4gdGhpcy5fY3VycmVudERpc3Bvc2FibGU7IH1cbiAgICBwdWJsaWMgc2V0IGRpc3Bvc2FibGUodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkRGlzcG9zZSA9IHRoaXMuaXNEaXNwb3NlZDtcbiAgICAgICAgaWYgKCFzaG91bGREaXNwb3NlKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50RGlzcG9zYWJsZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB0aGlzLl9jdXJyZW50RGlzcG9zYWJsZSA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkICYmIHZhbHVlKSB2YWx1ZS5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IHRoaXMuX2N1cnJlbnREaXNwb3NhYmxlO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudERpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKG9sZCkgb2xkLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
